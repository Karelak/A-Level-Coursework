<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Support Ticket Update</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body class="bg-light">
    <div
      class="container d-flex justify-content-center align-items-center"
      style="min-height: 100vh; padding: 20px 0"
    >
      <div class="card shadow-lg" style="width: 100%; max-width: 600px">
        <div class="card-body p-5">
          <h2 class="card-title text-center mb-3">Support Ticket Update</h2>
          <p class="text-muted text-center mb-4">
            Ticket #{{ ticket_id }}: {{ subject }}
          </p>

          <div class="alert alert-info mb-4" role="alert">
            <strong>Conversation History:</strong>
          </div>

          {% for message in conversation %}
          <div
            class="card mb-3 {% if message.role == 'admin' %}border-primary{% else %}border-secondary{% endif %}"
          >
            <div
              class="card-header {% if message.role == 'admin' %}bg-primary text-white{% else %}bg-light{% endif %}"
            >
              <strong>{{ message.author }}</strong>
              <span
                class="badge {% if message.role == 'admin' %}badge-light{% else %}badge-secondary{% endif %}"
                style="float: right"
              >
                {{ message.role }}
              </span>
              <br />
              <small
                class="{% if message.role == 'admin' %}text-white-50{% else %}text-muted{% endif %}"
              >
                {{ message.timestamp }}
              </small>
            </div>
            <div class="card-body">
              <p class="mb-0">{{ message.message }}</p>
            </div>
          </div>
          {% endfor %}

          <hr />

          <p class="text-muted text-center mb-0">
            <small
              >Reply to this ticket by logging into your account or contact our
              support team directly.</small
            >
          </p>
        </div>
      </div>
    </div>
  </body>
</html>
